
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Refactor is Important - Sobiwi Blog</title>
  <meta name="author" content="Sobiwi">

  
  <meta name="description" content="This week a lot of refactorings have been done: form builder
highlighting notes on verses
layouts and partials Form Builder As you may already known &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sobiwi.peterwongpp.com/blog/refactor-is-important">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Sobiwi Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-28555042-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Sobiwi Blog</a></h1>
  
    <h2>User Contributed Bible</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sobiwi.peterwongpp.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/schedule">Schedule</a></li>
  <li><a href="http://sbw.heroku.com">Sobiwi</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/contact-us">Contact Us</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Refactor Is Important</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-05T19:39:00+08:00" pubdate data-updated="true">Feb 5<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>This week a lot of refactorings have been done:</p>

<ul>
<li>form builder</li>
<li>highlighting notes on verses</li>
<li>layouts and partials</li>
</ul>


<!-- more -->


<h2>Form Builder</h2>

<p>As you may already known, Sobiwi is based on <a href="http://twitter.github.com/bootstrap">Bootstrap</a> framework. Bootstrap is releasing its 2.0 version currently. But we are still using the 1.4 version.</p>

<p>To make it worse, our forms are generated by dirty (non-reusable) code. There are currently 6 forms (registration, login / logout, forget password, reset password, user updating and church updating). And it is obvious that there would be more and more forms. In the future, if we decide to upgrade to Bootstrap 2.0, it would be a nightmare to modify every forms (it seems that the some css class names have been updated).</p>

<p>Now we do not have too many forms and the refactoring is worth doing. Now we have a <code>BootstrapFormBuilder</code> to use very clean and direct syntax to generate the form structure of Bootstrap 1.4 forms. More form builders could be implemented easily to match the new form structures such as the Inline and Horizontal forms.</p>

<h2>Highlighting Notes on Verses</h2>

<p>The wiki part (user-contributing content) is always the most difficult one. We planned to let the user highlight a portion of text with or across verse(s).</p>

<p>We have developed a jQuery plugin for our own use to highlight texts. That plugin&#8217;s code is ugly yet functional. Now we need to show the notes on the verses.</p>

<p>For example, there were several annotations (an annotation is note on a portion of verse). We need those annotations being shown as soon as the page is shown.</p>

<p>By the trail we did, it turned out the the current HTML markups are not flexible enough to handle that efficiently. What&#8217;s more it is confusing to use only one color to highlight the notes.</p>

<p>As a result, we need to re-structure the markups and thus update the plugin we mentioned before (this reveals a smell of code&#8230;).</p>

<p>Luckily, the refactor has been done and we now can continuse to implement the highlighting existing annotations functionality.</p>

<h2>Layouts and Partials</h2>

<p>Actually this part is still in progress and I suppose it would be done next week.</p>

<p>The layouts and partials are drawn on paper and made clear what&#8217;s their responsibily. Now they are clearer and view tests could be written.</p>

<p>It is in progress and we have updated some parts such as the different timelines (in a single verse, a user&#8217;s profile, user&#8217;s home, etc).</p>

<p>However, the Bootstrap 2.0 made me stop and think again should it be done now, or should it be done together with upgrading to Bootstrap 2.0.</p>

<p>If any of you have ideas for me, please tell me either though the contact us form, emails or twitter!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Sobiwi</span></span>

      








  


<time datetime="2012-02-05T19:39:00+08:00" pubdate data-updated="true">Feb 5<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/news/'>news</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://sobiwi.peterwongpp.com/blog/refactor-is-important/" data-via="" data-counturl="http://sobiwi.peterwongpp.com/blog/refactor-is-important/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/user-timeline/" title="Previous Post: user timeline">&laquo; user timeline</a>
      
      
        <a class="basic-alignment right" href="/blog/updated-the-schedule/" title="next Post: updated the schedule">updated the schedule &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Project Information</h1>
  <p>
    <strong>Project Title</strong>: Social Bible Wiki<br>
    <strong>Team Name</strong>: PPP<br>
    <strong>Team Email</strong>: <a href="mailto:fyp11011@cs.hku.hk">fyp11011@cs.hku.hk</a>
  </p>
  
  <h1>Supervisor</h1>
  <p>
    <strong>Dr. Vincent Lau</strong><br>
    <strong>Email</strong>: <a href="mailto:vmklau@cs.hku.hk">vmklau@cs.hku.hk</a><br>
    <strong>Website</strong>: <a href="http://www.cs.hku.hk/people/profile.jsp?teacher=vmklau">http://www.cs.hku.hk/people/profile.jsp?teacher=vmklau</a>
  </p>
  
  <h1>Team Member</h1>
  <p>
    <strong>Peter, Wong Chun Hung</strong> (2008018364)<br>
    BEng(CompSc), <small>Minor in Japanese Language</small><br>
    <strong>Email</strong>: <a href="mailto:chwong2@cs.hku.hk">chwong2@cs.hku.hk</a><br>
    <strong>Website</strong>: <a href="http://peterwongpp.com">http://peterwongpp.com</a>
  </p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/javascript-selection-is-ready/">Javascript Selection is Ready</a>
      </li>
    
      <li class="post">
        <a href="/blog/updated-the-schedule/">updated the schedule</a>
      </li>
    
      <li class="post">
        <a href="/blog/refactor-is-important/">Refactor is Important</a>
      </li>
    
      <li class="post">
        <a href="/blog/user-timeline/">user timeline</a>
      </li>
    
      <li class="post">
        <a href="/blog/newly-updates/">Newly Updates</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Sobiwi -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
